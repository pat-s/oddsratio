<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Odds Ratios of Generalized Additive (Mixed) Models — or_gam • oddsratio</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Odds Ratios of Generalized Additive (Mixed) Models — or_gam"><meta name="description" content="This function calculates odds ratio(s) for specific increment
steps of GAM(M) models. Odds ratios can also be calculated for continuous
(percentage) increment steps across the whole predictor distribution using
slice = TRUE."><meta property="og:description" content="This function calculates odds ratio(s) for specific increment
steps of GAM(M) models. Odds ratios can also be calculated for continuous
(percentage) increment steps across the whole predictor distribution using
slice = TRUE."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">oddsratio</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/oddsratio.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pat-s/oddsratio/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Odds Ratios of Generalized Additive (Mixed) Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/pat-s/oddsratio/blob/main/R/or_gam.R" class="external-link"><code>R/or_gam.R</code></a></small>
      <div class="d-none name"><code>or_gam.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates odds ratio(s) for specific increment
steps of GAM(M) models. Odds ratios can also be calculated for continuous
(percentage) increment steps across the whole predictor distribution using
<code>slice = TRUE</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">or_gam</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  percentage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  slice <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ci <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The data used for model fitting.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A fitted GAM(M).</p></dd>


<dt id="arg-pred">pred<a class="anchor" aria-label="anchor" href="#arg-pred"></a></dt>
<dd><p>Predictor name for which to calculate the odds ratio.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>Numeric vector of length two. Predictor values to estimate odds
ratio from. Function is written to use the first provided value as the
"lower" one, i.e. calculating the odds ratio 'from value1 to value2'. Only
used if <code>slice = FALSE</code>.</p></dd>


<dt id="arg-percentage">percentage<a class="anchor" aria-label="anchor" href="#arg-percentage"></a></dt>
<dd><p>Percentage number to split the predictor distribution into.
A value of 10 would split the predictor distribution by 10\<!-- % intervals. -->
Only needed if <code>slice = TRUE</code>.</p></dd>


<dt id="arg-slice">slice<a class="anchor" aria-label="anchor" href="#arg-slice"></a></dt>
<dd><p>Whether to calculate odds ratios for fixed increment steps over
the whole predictor distribution. See <code>percentage</code> for setting the
increment values.</p></dd>


<dt id="arg-ci">ci<a class="anchor" aria-label="anchor" href="#arg-ci"></a></dt>
<dd><p>Currently fixed to 95\<!-- % confidence interval level (2.5\\% - 97.5\\%). --></p>
<p>Currently supported functions: <a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam</a>, <a href="https://rdrr.io/pkg/mgcv/man/gamm.html" class="external-link">mgcv::gamm</a>,
<a href="https://rdrr.io/pkg/gam/man/gam.html" class="external-link">gam::gam</a>. For <a href="https://rdrr.io/pkg/mgcv/man/gamm.html" class="external-link">mgcv::gamm</a>, the <code>model</code> input of or_gam needs to be the
<code>gam</code> output (e.g. <code>fit_gam$gam</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> with (up to) eight columns. <code>perc1</code> and <code>perc2</code> are
only returned if <code>slice = TRUE</code>:</p>
<dl><dt>predictor</dt>
<dd><p>Predictor name</p></dd>

<dt>value1</dt>
<dd><p>First value of odds ratio calculation</p></dd>

<dt>value2</dt>
<dd><p>Second value of odds ratio calculation</p></dd>

<dt>perc1</dt>
<dd><p>Percentage value of <code>value1</code></p></dd>

<dt>perc2</dt>
<dd><p>Percentage value of <code>value2</code></p></dd>

<dt>oddsratio</dt>
<dd><p>Calculated odds ratio(s)</p></dd>

<dt>ci_low</dt>
<dd><p>Lower <code>(2.5%)</code> confident interval of odds ratio</p></dd>

<dt>ci_high</dt>
<dd><p>Higher <code>(97.5%)</code> confident interval of odds ratio</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="or_glm.html">or_glm()</a></code> <code><a href="plot_gam.html">plot_gam()</a></code> <code><a href="insert_or.html">insert_or()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pat-s/oddsratio" class="external-link">oddsratio</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mgcv</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit_gam</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">gam</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">x0</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">x1</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">s</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="va">x3</span><span class="op">)</span> <span class="op">+</span> <span class="va">x4</span>, data <span class="op">=</span> <span class="va">data_gam</span><span class="op">)</span> <span class="co"># fit model</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate OR for specific increment step of continuous variable</span></span></span>
<span class="r-in"><span><span class="fu">or_gam</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data_gam</span>, model <span class="op">=</span> <span class="va">fit_gam</span>, pred <span class="op">=</span> <span class="st">"x2"</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.099</span>, <span class="fl">0.198</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        x2  0.099  0.198  23.32353      23.30424        23.34283</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate OR for change of indicator variable</span></span></span>
<span class="r-in"><span><span class="fu">or_gam</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data_gam</span>, model <span class="op">=</span> <span class="va">fit_gam</span>, pred <span class="op">=</span> <span class="st">"x4"</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"D"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        x4      B      D 0.4744264     0.4976375        0.452298</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Calculate ORs for percentage increments of predictor distribution</span></span></span>
<span class="r-in"><span><span class="co">## (here: 20%)</span></span></span>
<span class="r-in"><span><span class="fu">or_gam</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data_gam</span>, model <span class="op">=</span> <span class="va">fit_gam</span>, pred <span class="op">=</span> <span class="st">"x2"</span>,</span></span>
<span class="r-in"><span>  percentage <span class="op">=</span> <span class="fl">20</span>, slice <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   predictor value1 value2 perc1 perc2 oddsratio CI_low (2.5%) CI_high (97.5%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        x2  0.001  0.200     0    20   2510.77       1091.68         5774.53</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        x2  0.200  0.400    20    40      0.03          0.03            0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        x2  0.400  0.599    40    60      0.58          0.56            0.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        x2  0.599  0.799    60    80      0.06          0.06            0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        x2  0.799  0.998    80   100      0.41          0.75            0.22</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://pat-s.me" class="external-link">Patrick Schratz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

