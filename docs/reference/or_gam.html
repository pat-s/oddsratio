<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate odds ratios of Generalized Additive (Mixed) Models — or_gam • oddsratio</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">oddsratio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pat-s/oddsratio">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate odds ratios of Generalized Additive (Mixed) Models</h1>
    </div>

    
    <p>This function calculates odds ratio(s) for specific increment
steps of a GAM(M)s.</p>
<p>Odds ratios can also be calculated for continuous percentage
increment steps across the whole predictor distribution using <code>slice = TRUE</code>.</p>
    

    <pre class="usage"><span class='fu'>or_gam</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>values</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>percentage</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>slice</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>CI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data used for model fitting.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>A fitted GAM(M).</p></td>
    </tr>
    <tr>
      <th>pred</th>
      <td><p>Character. Predictor name for which to calculate
the odds ratio.</p></td>
    </tr>
    <tr>
      <th>values</th>
      <td><p>Numeric vector of length two.
Predictor values to estimate odds ratio from. Function is written to use the
first provided value as the "lower" one, i.e. calculating the odds ratio
'from value1 to value2'. Only used if <code>slice = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>percentage</th>
      <td><p>Numeric. Percentage number to split the
predictor distribution into.
A value of 10 would split the predictor distribution by 10% intervals.
Only needed if <code>slice = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>slice</th>
      <td><p>Logical. <code>Default = FALSE</code>. Whether to calculate
odds ratios for fixed increment steps over the whole predictor distribution.
See <code>percentage</code> for setting the increment values.</p></td>
    </tr>
    <tr>
      <th>CI</th>
      <td><p>Numeric. Currently fixed to 95% confidence interval level
(2.5% - 97.5%).
It should not be changed in a function call!</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with (up to) eight columns. <code>perc1</code> and <code>perc2</code>
are only returned if <code>slice = TRUE</code>:</p>
<dt>predictor</dt><dd><p>Predictor name</p></dd>
<dt>value1</dt><dd><p>First value of odds ratio calculation</p></dd>
<dt>value2</dt><dd><p>Second value of odds ratio calculation</p></dd>
<dt>perc1</dt><dd><p>Percentage value of <code>value1</code></p></dd>
<dt>perc2</dt><dd><p>Percentage value of <code>value2</code></p></dd>
<dt>oddsratio</dt><dd><p>Calculated odds ratio(s)</p></dd>
<dt>CI_low</dt><dd><p>Lower <code>(2.5%)</code> confident interval of odds ratio</p></dd>
<dt>CI_high</dt><dd><p>Higher <code>(97.5%)</code> confident interval of odds ratio</p></dd>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently supported functions: <a href='http://www.rdocumentation.org/packages/mgcv/topics/gam'>mgcv::gam</a>,
<a href='http://www.rdocumentation.org/packages/mgcv/topics/gamm'>mgcv::gamm</a>, <a href='http://www.rdocumentation.org/packages/gam/topics/gam'>gam::gam</a>.</p>
<p>For <a href='http://www.rdocumentation.org/packages/mgcv/topics/gamm'>mgcv::gamm</a>, the <code>model</code> input of
or_gam needs to be the <code>gam</code> output (e.g. <code>fit_gam$gam</code>).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><a href='or_glm.html'>or_glm</a>
    <a href='plot_gam.html'>plot_gam</a>
    <a href='insert_or.html'>insert_or</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># load data (Source: ?mgcv::gam) and fit model</span>
<span class='fu'>library</span>(<span class='no'>mgcv</span>)
<span class='no'>fit_gam</span> <span class='kw'>&lt;-</span> <span class='fu'>gam</span>(<span class='no'>y</span> ~ <span class='fu'>s</span>(<span class='no'>x0</span>) + <span class='fu'>s</span>(<span class='fu'>I</span>(<span class='no'>x1</span>^<span class='fl'>2</span>)) + <span class='fu'>s</span>(<span class='no'>x2</span>) +
               <span class='fu'>offset</span>(<span class='no'>x3</span>) + <span class='no'>x4</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data_gam</span>) <span class='co'># fit model</span>

<span class='co'># Calculate OR for specific increment step of continuous variable</span>
<span class='fu'>or_gam</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data_gam</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>fit_gam</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='st'>"x2"</span>,
       <span class='kw'>values</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.099</span>, <span class='fl'>0.198</span>))</div><div class='output co'>#&gt;   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x2  0.099  0.198  23.32353      23.30424        23.34283</div><div class='input'>
<span class='co'>## Calculate OR for change of indicator variable</span>
<span class='fu'>or_gam</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data_gam</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>fit_gam</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='st'>"x4"</span>,
       <span class='kw'>values</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"B"</span>, <span class='st'>"D"</span>))</div><div class='output co'>#&gt;   predictor value1 value2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x4      B      D 0.4744264     0.4976375        0.452298</div><div class='input'>
<span class='co'>## Calculate ORs for percentage increments of predictor distribution</span>
<span class='co'>## (here: 20%)</span>
<span class='fu'>or_gam</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data_gam</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>fit_gam</span>, <span class='kw'>pred</span> <span class='kw'>=</span> <span class='st'>"x2"</span>,
       <span class='kw'>percentage</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>slice</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   predictor value1 value2 perc1 perc2 oddsratio CI_low (2.5%) CI_high (97.5%)
#&gt; 1        x2  0.001  0.200     0    20   2510.77       1091.68         5774.53
#&gt; 2        x2  0.200  0.400    20    40      0.03          0.03            0.03
#&gt; 3        x2  0.400  0.599    40    60      0.58          0.56            0.60
#&gt; 4        x2  0.599  0.799    60    80      0.06          0.06            0.06
#&gt; 5        x2  0.799  0.998    80   100      0.41          0.75            0.22</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Patrick Schratz <a href = 'mailto:patrick.schratz@gmail.com'>patrick.schratz@gmail.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
